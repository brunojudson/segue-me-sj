<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" lang="pt-BR" xml:lang="pt-BR">

<ui:composition template="/templates/template.xhtml">
	<ui:define name="title">
		#{empty param.id ? 'Cadastrar' : 'Editar'} Casal - Sistema Segue-me
	</ui:define>

	<ui:define name="content">
		<div class="content-container">
			<!-- Cabe√ßalho da p√°gina -->
			<div class="page-header">
				<div class="page-header-content">
					<div class="page-title-section">
						<h1 class="page-title">
							<i class="pi pi-heart page-icon"></i> <span class="title-text">#{empty
								param.id ? 'Cadastrar' : 'Editar'} Casal</span>
						</h1>
						<p class="page-subtitle">#{empty param.id ? 'Cadastre um novo
							casal no sistema' : 'Atualize os dados do casal'}</p>
					</div>
					<div class="page-actions">
						<p:button value="Voltar √† Lista"
							outcome="/pages/casal/lista.xhtml" icon="pi pi-arrow-left"
							styleClass="action-button-primary" />
					</div>
				</div>
			</div>

			<h:form id="casalForm" enctype="multipart/form-data"
				styleClass="modern-form">
				<p:messages id="messages" showDetail="true" closable="true"
					styleClass="modern-messages" onshow="scrollToTopOnError()">
					<p:autoUpdate />
				</p:messages>

				<f:metadata>
					<f:viewParam name="id" />
					<f:viewAction action="#{casalController.carregarCasal}"
						if="#{not empty param.id}" />
				</f:metadata>

				<!-- Se√ß√£o: Dados do Casal -->
				<div class="form-section">
					<p:fieldset legend="üíë Dados do Casal" styleClass="modern-fieldset"
						toggleable="true">
						<div class="field-grid">
							<div class="field-group">
								<p:outputLabel for="esposo" value="Esposo"
									styleClass="required-field" />
								<p:selectOneMenu id="esposo"
									value="#{casalController.casal.pessoa1}"
									converter="omnifaces.SelectItemsConverter" required="true"
									requiredMessage="O esposo √© obrigat√≥rio" filter="true"
									filterMatchMode="startsWith" filterNormalize="true"
									panelStyle="width:400px">
									<f:selectItem itemLabel="Selecione o esposo" itemValue=""
										noSelectionOption="true" />
									<f:selectItems value="#{casalController.pessoasMasculinas}"
										var="pessoa" itemLabel="#{pessoa.nome}" itemValue="#{pessoa}" />
								</p:selectOneMenu>
								<small class="field-hint">Selecione a pessoa do sexo
									masculino</small>
							</div>

							<div class="field-group">
								<p:outputLabel for="esposa" value="Esposa"
									styleClass="required-field" />
								<p:selectOneMenu id="esposa"
									value="#{casalController.casal.pessoa2}"
									converter="omnifaces.SelectItemsConverter" required="true"
									requiredMessage="A esposa √© obrigat√≥ria" filter="true"
									filterMatchMode="startsWith" filterNormalize="true"
									panelStyle="width:400px">
									<f:selectItem itemLabel="Selecione a esposa" itemValue=""
										noSelectionOption="true" />
									<f:selectItems value="#{casalController.pessoasFemininas}"
										var="pessoa" itemLabel="#{pessoa.nome}" itemValue="#{pessoa}" />
								</p:selectOneMenu>
								<small class="field-hint">Selecione a pessoa do sexo
									feminino</small>
							</div>

							<div class="field-group">
								<p:outputLabel for="dataCasamento" value="Data de Casamento" />
								<p:datePicker id="dataCasamento"
									value="#{casalController.casal.dataCasamento}"
									pattern="dd/MM/yyyy" showIcon="true" showOnFocus="false"
									yearRange="c-100:c+0" placeholder="DD/MM/AAAA" />
								<small class="field-hint">Data de uni√£o oficial do casal</small>
							</div>
						</div>
					</p:fieldset>
				</div>

				<!-- Se√ß√£o: Informa√ß√µes Adicionais -->
				<div class="form-section">
					<p:fieldset legend="üìù Informa√ß√µes Adicionais"
						styleClass="modern-fieldset" toggleable="true">
						<div class="field-grid">
							<div class="field-group full-width">
								<p:outputLabel for="observacoes" value="Observa√ß√µes" />
								<p:inputTextarea id="observacoes"
									value="#{casalController.casal.observacoes}" rows="4"
									maxlength="255"
									placeholder="Observa√ß√µes sobre o casal, informa√ß√µes relevantes, etc." />
								<small class="field-hint">Informa√ß√µes adicionais sobre o
									casal (m√°ximo 255 caracteres)</small>
							</div>
						</div>
					</p:fieldset>
				</div>

				<!-- Se√ß√£o: Foto -->
				<div class="form-section">
					<p:fieldset legend="üì∑ Foto do Casal" styleClass="modern-fieldset"
						toggleable="true" collapsed="true">
						<div class="field-grid">
							<div class="field-group upload-section">
								<p:outputLabel for="foto" value="Foto do Casal" />
								<p:fileUpload id="foto" value="#{casalController.uploadedFile}"
									mode="simple" accept="image/*" label="Escolher Foto"
									uploadLabel="Enviar" cancelLabel="Cancelar" sizeLimit="5242880"
									allowTypes="/(\.|\/)(jpe?g|png|gif)$/i" />
								<small class="field-hint"> <i class="pi pi-info-circle"></i>
									Formatos aceitos: JPG, PNG, GIF. Tamanho m√°ximo: 5MB
								</small>
							</div>
						</div>
					</p:fieldset>
				</div>

				<!-- Bot√µes de A√ß√£o -->
				<div class="form-actions">
					<div class="action-buttons">
						<p:commandButton value="üíæ Salvar Casal"
							action="#{casalController.salvar}" update="@form"
							styleClass="ui-button-success action-button-primary"
							oncomplete="handleSaveComplete(args);" validateClient="true" />

						<p:commandButton value="üìã Salvar e Continuar"
							action="#{casalController.salvarEContinuar}"
							update="@form messages" process="@form"
							styleClass="ui-button-info action-button-secondary"
							validateClient="true" oncomplete="handleSaveComplete(args);" />

						<p:button value="‚ùå Cancelar" outcome="/pages/casal/lista.xhtml"
							icon="pi pi-times"
							styleClass="ui-button-secondary action-button-cancel" />
					</div>

					<div class="form-help">
						<small> <i class="pi pi-info-circle"></i> Campos marcados
							com * s√£o obrigat√≥rios. Certifique-se de selecionar pessoas do
							sexo correto para cada campo.
						</small>
					</div>
				</div>
			</h:form>
		</div>

		<style>
/* Estilos espec√≠ficos para o cadastro de casal */
.upload-section .ui-fileupload {
	width: 100%;
}

.upload-section .ui-fileupload .ui-fileupload-buttonbar {
	background: #f8f9fa;
	border: 2px dashed #dee2e6;
	border-radius: 8px;
	padding: 1.5rem;
	text-align: center;
}

.upload-section .ui-fileupload .ui-fileupload-buttonbar:hover {
	border-color: #2196f3;
	background: #f0f8ff;
}

.ui-selectonemenu {
	min-width: 250px;
}

.ui-selectonemenu .ui-selectonemenu-label {
	padding: 0.75rem;
}

.ui-selectonemenu-panel .ui-selectonemenu-items {
	padding: 0.5rem 0;
}

.ui-selectonemenu-panel .ui-selectonemenu-item {
	padding: 0.75rem 1rem;
	border-bottom: 1px solid #f0f0f0;
}

.ui-selectonemenu-panel .ui-selectonemenu-item:hover {
	background-color: #f8f9fa;
}

.ui-selectonemenu-filter-container {
	padding: 0.75rem;
	border-bottom: 1px solid #dee2e6;
}

/* Responsividade espec√≠fica */
@media ( max-width : 768px) {
	.field-grid {
		grid-template-columns: 1fr;
	}
	.action-buttons {
		flex-direction: column;
		gap: 0.75rem;
	}
	.action-buttons .ui-button {
		width: 100%;
	}
	.ui-selectonemenu {
		min-width: auto;
		width: 100%;
	}
}

/* Ajuste espec√≠fico para bot√µes de datePicker - alinha com altura dos campos */
button.ui-datepicker-trigger {
	min-height: 35px !important;
	height: 35px !important;
	max-height: 35px !important;
	width: 35px !important;
	min-width: 35px !important;
	padding: 0 !important;
	margin: 0 !important;
	box-sizing: border-box !important;
	vertical-align: top !important;
	display: inline-flex !important;
	align-items: center !important;
	justify-content: center !important;
	font-size: 1rem !important;
	line-height: 1 !important;
}

/* Ajusta o campo de input do datePicker para manter consist√™ncia */
input.ui-inputfield.ui-datepicker-input {
	min-height: 29px !important;
	height: 29px !important;
	max-height: 29px !important;
	vertical-align: top !important;
}

/* Container inline do datePicker - APENAS para o input e bot√£o */
.ui-datepicker-group {
	display: inline-flex !important;
	align-items: stretch !important;
}
</style>
		<h:outputScript library="js" name="scrollUp.js" target="head" />
	</ui:define>
</ui:composition>

</html>